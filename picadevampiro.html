<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />    
    <title>Jogo da Velha</title>

    <!-- scripts -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.js"
      integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css" integrity="sha384-PmY9l28YgO4JwMKbTvgaS7XNZJ30MK9FAZjjzXtlqyZCqBY6X6bXIkM++IkyinN+" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js" integrity="sha384-vhJnz1OVIdLktyixHY4Uk3OHEwdQqPppqYR8+5mjsauETgLOcEynD9oPHhhz18Nw" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="estilo.css" />
  </head>

  <body>
    <div id="pagina_inicial" class="container">

      <div class="page-header">
        <h1>Jogo Da Velha</h1>
      </div>

      <div align="center">
        <table id="painel_do_jogo">
          <tbody>

        
            
            </tr>
          </tbody>
        </table>
        
        <div style="display: none;" id="palco_do_jogo">


          <div style="display: inline-block;">
            <table>
              <tr>
                <td style="border-bottom: 1px solid dimgrey; border-right: 1px solid dimgrey">
                  <div class="jogada" id="a-1"style="height: 100px; width: 100px"></div>
                </td>

                <td style="border-bottom: 1px solid dimgrey; border-right: 1px solid dimgrey">
                  <div class="jogada" id="a-2" style="height: 100px; width: 100px"></div>
                </td>                
                
                <td style=" border-bottom: 1px solid dimgrey">
                    <div class="jogada" id="a-3" style="height: 100px; width: 100px"></div>
                </td>                
              </tr>

              <tr>
                  <td>
                    <div class="jogada" id="b-1" style="height: 100px; width: 100px"></div>
                  </td>

                  <td style="border-left: 1px solid dimgrey; border-right: 1px solid dimgrey">
                      <div class="jogada" id="b-2" style="height: 100px; width: 100px"></div>
                  </td>  

                  <td>
                    <div class="jogada" id="b-3" style="height: 100px; width: 100px"></div>
                  </td>                  
              </tr>

              <tr>
                  <td style="border-top: 1px solid dimgrey; border-right: 1px solid dimgrey">
                      <div class="jogada" id="c-1" style="height: 100px; width: 100px"></div>
                    </td>
    
                    <td style="border-top: 1px solid dimgrey; border-right: 1px solid dimgrey">
                      <div class="jogada" id="c-2" style="height: 100px; width: 100px"></div>
                    </td>                
                    
                    <td style=" border-top: 1px solid dimgrey">
                        <div class="jogada" id="c-3" style="height: 100px; width: 100px"></div>
                    </td>
              </tr>

            </table>
          </div>

          <div>
            <button id="restart_btn" type="reset" class="btn btn-success"><a href="index.html">Play Again</a></button>
          </div>
        </div>
      </div>
    </div>

    <script>
    var rodada = 1;
var matriz_jogo = Array(3);

matriz_jogo['a'] = Array(3);
matriz_jogo['b'] = Array(3);
matriz_jogo['c'] = Array(3);

matriz_jogo['a'][1] = 0;
matriz_jogo['a'][2] = 0;
matriz_jogo['a'][3] = 0;

matriz_jogo['b'][1] = 0;
matriz_jogo['b'][2] = 0;
matriz_jogo['b'][3] = 0;

matriz_jogo['c'][1] = 0;
matriz_jogo['c'][2] = 0;
matriz_jogo['c'][3] = 0;


$(document).ready(function(){ 

    //INCIALIZAÇÃO DO JOGO

        $('.transform').toggleClass('transform-active');

        $('#nome_jogador_1').html($('#info_player_1').val());
        $('#nome_jogador_2').html($('#info_player_2').val());

        $('#palco_do_jogo').fadeIn(1);
        $('#painel_do_jogo').fadeOut(1);
        $('#nome_jogador_1').addClass("player_turn");
        $('#restart_btn').hide();

    //REGRAS DA JOGADA
    $('.jogada').click(function(){
        var coordenada = this.id;
        $('#'+coordenada).off();
        var ponto = 0;

        if((rodada % 2) == 1){
            $('#'+(coordenada)).addClass("mark_red");
            $('#nome_jogador_1').removeClass("player_turn");
            $('#nome_jogador_2').addClass("player_turn");
            ponto = -1;
        }else{
  
            $('#'+(coordenada)).addClass("mark_blue");
            $('#nome_jogador_2').removeClass("player_turn");
            $('#nome_jogador_1').addClass("player_turn");
            ponto = 1;
        }
        rodada ++;

        var linha_coluna = coordenada.split('-');
        matriz_jogo[linha_coluna[0]][linha_coluna[1]] = ponto;

        verificacao_jogada();
    });    
    
    function verificacao_jogada(){

        //VERIFICAÇÃO HORIZONTAL
        var pontos = 0;
        for(var i = 1; i <= 3; i++){
            pontos = pontos + matriz_jogo['a'][i];
        };
        ganhador(pontos);

        var pontos = 0;
        for(var i = 1; i <= 3; i++){
            pontos = pontos + matriz_jogo['b'][i];
        };
        ganhador(pontos);

        var pontos = 0;
        for(var i = 1; i <= 3; i++){
            pontos = pontos + matriz_jogo['c'][i];
        };
        ganhador(pontos);

        //VERIFICAÇÃO VERTICAL
        for(var i = 1; i <= 3; i++){
            var pontos = 0;
            pontos = pontos + matriz_jogo['a'][i];
            pontos = pontos + matriz_jogo['b'][i];
            pontos = pontos + matriz_jogo['c'][i];
            ganhador(pontos);
        };
        
        //VERIFICAÇÃO VERTICAL
        var pontos = 0;
        pontos = matriz_jogo['a'][1] + matriz_jogo['b'][2] + matriz_jogo['c'][3];
        ganhador(pontos);

        var pontos = 0;
        pontos = matriz_jogo['a'][3] + matriz_jogo['b'][2] + matriz_jogo['c'][1];
        ganhador(pontos);
    };

    //DECLARAÇÃO DE VENCEDOR
    function ganhador(pontos){
        if(pontos == -3){
            setTimeout(function() {alert("Jogador 1: " + $('#info_player_1').val() + " ganhou");}, 500);
            $('.jogada').off();
            $('#restart_btn').show();

        }else if(pontos == 3){
            setTimeout(function() {alert("Jogador 2: " + $('#info_player_2').val() + " ganhou");}, 500);
            $('.jogada').off();
            $('#restart_btn').show();

        }

    };
});

    </script>
  </body>
</html>
